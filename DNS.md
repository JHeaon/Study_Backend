# DNS

## 1. DNS란 무엇인가?
Domain Name System의 약자로 웹사이트의 IP 주소와 도메인 주소를 이어주는 환경 / 시스템을 의미합니다. 

- IP : Interent Protocol 을 의미하며 인터넷에 연결되어 있는 모든 장치들을 식별 할 수 잇도록 각각의 장비에게 부여되는 고유주소를 의미한다.

<BR>

## 2. DNS의 작동 원리

<p align="center">
    <img src = "Pictures\DNS_1.jpg">
</p>

일반적으로 웹 사이트의 데이터가 저장되어 있는 호스팅 서버는 인터넷 회선이 연결된 컴퓨터/장치 이기에 IP주소를 가지고 있고, 이 주소가 실제 웹사이트 주소라고 할 수 있습니다. 

DNS 서버는 이런 IP주소를 특정 도메인 주소와 같다는 기록을 저장해두고, 인터넷 사용자들이 도메인 주소를 검색 했을때, IP주소로 연결되게 해주도록 하는 역활을 합니다.

예) 브라우저에 WWW.NAVER.COM 을 검색했다면

1. DNS 서버로 도메인 주소가 전달
2. DNS 서버 내부에서 도메인주소가 "WWW.NAVER.COM = 12.123.123.123" 이라는 항목을 찾아냄
3. 해당 브라우저에게 12.123.123.123 IP 주소를 가지고 있는 호스팅 서버(웹 사이트 데이터가 저장된 곳)으로 안내
4. WWW.NAVER.COM 호스팅 서버로 도달

<BR>

## 3. DNS 서버 종류 구분

물론 이런 DNS 서버가 하나로 처리하면 좋겠지만, 도메인의 수가 많기 때문에 DNS 서버 종류를 계층화하여 단계적으로 처리하기 위해서 분리 운영중입니다.

<p align="center">
    <img src = "Pictures\DNS_2.jpg">
</p>

- Root DNS Server : ICANN이 직접 관리하는 서버로, TLD DNS 서버 IP들을 저장해두고 안내해주는 역활을 합니다.

- TLD(최상위 도메인) DNS Server : 도메인 등록 기관(Registry)이 관리하는 서버로, Authoritative DNS 서버 주소를 저장해두고 안내하는 역활을 합니다. 어떤 도메인 묶음이 이 Author DNS Server에 속하는지 아는 이유는 도메인 판매 업체(Registrar)의 DNS 설정이 변경되면 도메인 등록 기관으로 전달되기 때문입니다.

- Authoritative DNS Sever : 실제 개인 도메인과 IP 주소의 관계가 기록/저장/변경 되는 서버입니다. 일반적으로 도메인/호스팅 업체의 '네임서버'를 의미하지만, 개인적으로 DNS 서버를 구축할 경우도 여기에 해당됩니다.

- Recursive DNS Server : 인터넷 사용자가 가장 먼저 접근하는 DNS 서버이며, 위에 3개의 DNS 서버를 매번 거친다면 효율이 좋지 않기 때문에, 한 번 거친 후 얻은 데이터는 일정 기간 동안 캐시로 저장해 두는 서버를 의미합니다. 대표적으로 KT/LG/SK 와 같은 ISP(통신사) DNS 서버가 있으며, 브라우저 우회 용도로 많이 쓰는 구글 DNS 등이 있습니다. 

<BR>

## 4. 전체적인 DNS 동작 원리

<p align="center">
    <img src = "Pictures\DNS_3.jpg">
</p>

위의 그림 과 같이 진행되며, 하나씩 짚고 넘어가 보도록 하겠습니다.

1. 브라우저에서 WWW.NAVER.COM 을 검색하고, 사용자 통신사인 KT DNS 서버에게 도메인 주소에 해당하는 IP 주소를 요청

2. ISP 서버에세는 캐시 데이터가 없다는 것을 확인하고 루트 DNS 서버에게 어디로 가야하는지 요청(캐쉬가 있다면 8번으로 건너 뜀)

3. 루트 서버는 TLD DNS 서버 주소만 관리하기에, ***.COM 도메인을 보고 COM 도메인을 관리하는 TLD DNS 서버 주소로 안내

4. ISP 서버는 COM 서버에게 어디로 가야하는지 요청

5. COM 서버는 가비아 DNS 서버에서 해당 도메인이 관리되고 있다는 걸 확인하고 안내

6. ISP 서버는 가비아 서버에게 어디로 가야하는지 요청

7. 가비아 서버는 "WWW.NAVER.COM = 12.123.123.123" 이라는 정보를 확인하고 IP를 알려줌, 동시에 ISP 서버는 해당 정보를 캐시 형태로 기록해둠

8. ISP 서버는 브라우저에게 12.123.123.123 주소를 안내

9. 브라우저는 12.123.123.123 IP주소를 가지고 있는 호스팅 서버에게 웹사이트 데이터를 요청

10. 웹 사이트 출력

<BR><BR>

참고 사이트 :
* https://gentlysallim.com/dns%EB%9E%80-%EB%AD%90%EA%B3%A0-%EB%84%A4%EC%9E%84%EC%84%9C%EB%B2%84%EB%9E%80-%EB%AD%94%EC%A7%80-%EA%B0%9C%EB%85%90%EC%A0%95%EB%A6%AC/
* https://aws.amazon.com/ko/route53/what-is-dns/




